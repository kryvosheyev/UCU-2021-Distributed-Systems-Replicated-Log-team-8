<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="871px" height="1371px" viewBox="-0.5 -0.5 871 1371" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2021-10-13T21:35:31.109Z&quot; agent=&quot;5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.81 Safari/537.36&quot; version=&quot;15.5.2&quot; etag=&quot;tfFMHuaYaPFNHO-6o8vW&quot; type=&quot;google&quot;&gt;&lt;diagram id=&quot;SVHreGo0jJhPCHSrUCqV&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="0" y="0" width="820" height="170" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 818px; height: 1px; padding-top: 85px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span id="docs-internal-guid-1c3bc2f9-7fff-4751-e7f0-3610d2d20af6"><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; font-family: &quot;arial&quot; ; vertical-align: baseline">  --------------------------------- <b><font color="#14ba2b" style="background-color: transparent"> </font><span style="background-color: rgb(255 , 255 , 51)">Replicated Log 1</span></b><span style="background-color: rgb(255 , 255 , 51)"> </span>----------------------------------</span></p><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; font-family: &quot;arial&quot; ; background-color: transparent ; vertical-align: baseline">Properties and assumptions:</span></p><ul style="margin-top: 0 ; margin-bottom: 0"><li dir="ltr" style="list-style-type: disc ; font-size: 11pt ; font-family: &quot;arial&quot; ; background-color: transparent ; vertical-align: baseline"><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline">after each POST request, the message should be replicated on every </span><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">Secondary</span><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline"> server</span></p></li><li dir="ltr" style="list-style-type: disc ; font-size: 11pt ; font-family: &quot;arial&quot; ; background-color: transparent ; vertical-align: baseline"><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">Master</span><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline"> should ensure that </span><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">Secondaries</span><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline"> have received a message via </span><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">ACK</span></p></li><li dir="ltr" style="list-style-type: disc ; font-size: 11pt ; font-family: &quot;arial&quot; ; background-color: transparent ; vertical-align: baseline"><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline">POST request should be finished only after receiving </span><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">ACKs</span><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline"> from all </span><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">Secondaries</span><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline"> (blocking replication approach)</span></p></li><li dir="ltr" style="list-style-type: disc ; font-size: 11pt ; font-family: &quot;arial&quot; ; background-color: transparent ; vertical-align: baseline"><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline">to test that the replication is blocking, introduce the delay/sleep on the </span><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">Secondary</span></p></li><li dir="ltr" style="list-style-type: disc ; font-size: 11pt ; font-family: &quot;arial&quot; ; background-color: transparent ; vertical-align: baseline"><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline">at this stage assume that the communication channel is a perfect link (no failures and messages lost)</span></p></li></ul></span></div></div></div></foreignObject><text x="2" y="89" fill="#000000" font-family="Helvetica" font-size="12px">---------------------------------  Replicated Log 1 ----------------------------------...</text></switch></g><rect x="430" y="425" width="50" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 445px; margin-left: 431px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">M</div></div></div></foreignObject><text x="455" y="449" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">M</text></switch></g><rect x="580" y="480" width="50" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 500px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">S2</div></div></div></foreignObject><text x="605" y="504" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">S2</text></switch></g><rect x="580" y="370" width="50" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 390px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">S1</div></div></div></foreignObject><text x="605" y="394" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">S1</text></switch></g><rect x="70" y="595" width="270" height="95" fill="#cdeb8b" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 268px; height: 1px; padding-top: 643px; margin-left: 72px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">M receives an object:<br />POST  /master/add-message<br />body {   msg: <span style="color: rgb(51 , 51 , 51)"> {  property1: "any-value",</span><br style="color: rgb(51 , 51 , 51)" /><span style="color: rgb(51 , 51 , 51)">                          arr: [] } </span>,  // any  object<br />             options: {}   // will need for log 2, log 3<br />        }</div></div></div></foreignObject><text x="72" y="646" fill="#000000" font-family="Helvetica" font-size="12px">M receives an object:...</text></switch></g><rect x="220" y="355" width="160" height="165" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 438px; margin-left: 222px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span>config: {<br />MaxPubAcksInFlight = 1<br /></span><span></span><span style="font-family: &quot;consolas&quot; , &quot;inconsolata&quot; , &quot;courier&quot; , monospace ; font-size: 14px ; font-weight: 700 ; background-color: rgb(246 , 248 , 250)">store </span>="memory"<br />secondaries: [<br />  {  url: '127.0.0.1:6001'  },<br />  {  url: '127.0.0.1:6002'  }<br /> }<br />}</div></div></div></foreignObject><text x="222" y="441" fill="#000000" font-family="Helvetica" font-size="12px">config: {...</text></switch></g><rect x="660" y="320" width="210" height="105" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 208px; height: 1px; padding-top: 373px; margin-left: 662px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">config:{<br />   delayMin = 1000,<br />   delayMax = 3000,<br />   <span style="font-family: &quot;consolas&quot; , &quot;inconsolata&quot; , &quot;courier&quot; , monospace ; font-size: 14px ; font-weight: 700 ; background-color: rgb(246 , 248 , 250)">store </span>="memory"<br />   master = {  url: '127.0.0.1:6000'  },<br />}</div></div></div></foreignObject><text x="662" y="376" fill="#000000" font-family="Helvetica" font-size="12px">config:{...</text></switch></g><rect x="135" y="970" width="285" height="100" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 283px; height: 1px; padding-top: 1020px; margin-left: 137px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><br />   await promiseAll( sendToS1 (rLogMsg )<br />    to sendToSn).<br />   <br />  <span style="font-family: &quot;consolas&quot;">res.status(200).send({</span><span style="font-family: &quot;consolas&quot;">})</span></div></div></div></foreignObject><text x="137" y="1024" fill="#000000" font-family="Helvetica" font-size="12px">await promiseAll( sendToS1 (rLogMsg )...</text></switch></g><rect x="610" y="920" width="230" height="140" fill="#cdeb8b" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 228px; height: 1px; padding-top: 990px; margin-left: 612px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><br />S receives an object:<br />POST  /secondary/add-message<br />in rLogMsg format<br /><span style="color: rgb(51 , 51 , 51)">   body= {</span><br style="color: rgb(51 , 51 , 51)" /><span style="color: rgb(51 , 51 , 51)">          inc_id: 1,</span><br style="color: rgb(51 , 51 , 51)" /><span style="color: rgb(51 , 51 , 51)">          msg: </span><span style="color: rgb(51 , 51 , 51)"> {  property1: "any-value",</span><br style="color: rgb(51 , 51 , 51)" /><span style="color: rgb(51 , 51 , 51)">                          arr: [] <br />                    }</span><br style="color: rgb(51 , 51 , 51)" /><span style="color: rgb(51 , 51 , 51)">     }</span></div></div></div></foreignObject><text x="612" y="994" fill="#000000" font-family="Helvetica" font-size="12px">S receives an object:...</text></switch></g><rect x="140" y="740" width="260" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 258px; height: 1px; padding-top: 765px; margin-left: 142px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">rLogMsg = getNewRLogMsg( msg)<br /><span style="color: rgb(51 , 51 , 51)">storage</span>.add( rLogMsg )</div></div></div></foreignObject><text x="142" y="769" fill="#000000" font-family="Helvetica" font-size="12px">rLogMsg = getNewRLogMsg( msg)...</text></switch></g><rect x="220" y="800" width="190" height="140" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 188px; height: 1px; padding-top: 870px; margin-left: 222px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">getNewRLogMsg( msg) {<br />    n = storage.size()<br />    r = {<br />          inc_id: n,<br />          msg: msg<br />     }<br />}</div></div></div></foreignObject><text x="222" y="874" fill="#333333" font-family="Helvetica" font-size="12px">getNewRLogMsg( msg) {...</text></switch></g><rect x="100" y="180" width="340" height="100" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 338px; height: 1px; padding-top: 230px; margin-left: 102px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span><b>Publisher rate limiting</b></span><span> -  </span><span>MaxPubAcksInFlight</span><span>  limits the number of unacknowledged messages that a publisher may have in-flight at any given time. When this maximum is reached, further async publish calls will block until the number of unacknowledged messages falls below the specified limit.</span></div></div></div></foreignObject><text x="102" y="234" fill="#333333" font-family="Helvetica" font-size="12px">Publisher rate limiting -  MaxPubAcksInFlight  limits th...</text></switch></g><rect x="660" y="1070" width="190" height="95" fill="#cdeb8b" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 188px; height: 1px; padding-top: 1118px; margin-left: 662px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">storage.add( rLogMsg )<br /><pre style="font-family: &quot;consolas&quot;">res.status(200).send({<br />  IS_FAILED: 0<br />})</pre></div></div></div></foreignObject><text x="662" y="1121" fill="#000000" font-family="Helvetica" font-size="12px">storage.add( rLogMsg )...</text></switch></g><path d="M 430 435 L 380 437.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 630 380 L 660 372.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 667.5 920 L 617.5 520" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="2 6" pointer-events="stroke"/><path d="M 271.9 595 L 455 465" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="2 6" pointer-events="stroke"/><path d="M 420 995 L 603.77 956.31" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 608.91 955.23 L 602.78 960.1 L 603.77 956.31 L 601.34 953.25 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 660 1141.25 L 425.91 1047.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 421.04 1045.42 L 428.84 1044.77 L 425.91 1047.37 L 426.23 1051.27 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 205 690 L 205 733.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 205 738.88 L 201.5 731.88 L 205 733.63 L 208.5 731.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 205 790 L 206.21 963.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 206.24 968.88 L 202.69 961.91 L 206.21 963.63 L 209.69 961.86 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="430" y="630" width="420" height="220" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 418px; height: 1px; padding-top: 740px; margin-left: 432px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">storage = ordered list<br /><br />//custom functions<br />storage.add()<br />storage.getAllClientMessages()<br />storage.getAll</div></div></div></foreignObject><text x="432" y="744" fill="#000000" font-family="Helvetica" font-size="12px">storage = ordered list...</text></switch></g><rect x="610" y="1230" width="230" height="140" fill="#cdeb8b" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 228px; height: 1px; padding-top: 1300px; margin-left: 612px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><br />S returns all messages<br />GET  /secondary/get-all-messages<br />in user msg format<br /><span style="color: rgb(51 , 51 , 51)">   body={ <br />      messages: [ </span><br style="color: rgb(51 , 51 , 51)" /><span style="color: rgb(51 , 51 , 51)">         {   m</span><span style="color: rgb(51 , 51 , 51)">sg: </span><span style="color: rgb(51 , 51 , 51)"> { </span><span style="color: rgb(51 , 51 , 51)">}  },<br />        </span><span style="color: rgb(51 , 51 , 51)"> {   m</span><span style="color: rgb(51 , 51 , 51)">sg: </span><span style="color: rgb(51 , 51 , 51)"> { </span><span style="color: rgb(51 , 51 , 51)">}  },</span><span style="color: rgb(51 , 51 , 51)"><br /></span>      ]<br style="color: rgb(51 , 51 , 51)" /><span style="color: rgb(51 , 51 , 51)">   }        </span></div></div></div></foreignObject><text x="612" y="1304" fill="#000000" font-family="Helvetica" font-size="12px">S returns all messages...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>