<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="881px" height="1121px" viewBox="-0.5 -0.5 881 1121" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2021-10-13T20:35:07.842Z&quot; agent=&quot;5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.81 Safari/537.36&quot; version=&quot;15.5.2&quot; etag=&quot;3p__aiFKYHhS2sadwWMX&quot; type=&quot;google&quot;&gt;&lt;diagram id=&quot;_21yWdT4NxcU3qiMNeus&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="0" y="0" width="820" height="170" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 818px; height: 1px; padding-top: 85px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span id="docs-internal-guid-1c3bc2f9-7fff-4751-e7f0-3610d2d20af6"><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; font-family: &quot;arial&quot; ; vertical-align: baseline">  --------------------------------- <b><font color="#14ba2b" style="background-color: transparent"> </font><span style="background-color: rgb(255 , 255 , 51)">Replicated Log 1</span></b><span style="background-color: rgb(255 , 255 , 51)"> </span>----------------------------------</span></p><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; font-family: &quot;arial&quot; ; background-color: transparent ; vertical-align: baseline">Properties and assumptions:</span></p><ul style="margin-top: 0 ; margin-bottom: 0"><li dir="ltr" style="list-style-type: disc ; font-size: 11pt ; font-family: &quot;arial&quot; ; background-color: transparent ; vertical-align: baseline"><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline">after each POST request, the message should be replicated on every </span><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">Secondary</span><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline"> server</span></p></li><li dir="ltr" style="list-style-type: disc ; font-size: 11pt ; font-family: &quot;arial&quot; ; background-color: transparent ; vertical-align: baseline"><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">Master</span><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline"> should ensure that </span><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">Secondaries</span><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline"> have received a message via </span><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">ACK</span></p></li><li dir="ltr" style="list-style-type: disc ; font-size: 11pt ; font-family: &quot;arial&quot; ; background-color: transparent ; vertical-align: baseline"><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline">POST request should be finished only after receiving </span><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">ACKs</span><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline"> from all </span><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">Secondaries</span><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline"> (blocking replication approach)</span></p></li><li dir="ltr" style="list-style-type: disc ; font-size: 11pt ; font-family: &quot;arial&quot; ; background-color: transparent ; vertical-align: baseline"><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline">to test that the replication is blocking, introduce the delay/sleep on the </span><span style="font-size: 11pt ; background-color: transparent ; font-style: italic ; vertical-align: baseline">Secondary</span></p></li><li dir="ltr" style="list-style-type: disc ; font-size: 11pt ; font-family: &quot;arial&quot; ; background-color: transparent ; vertical-align: baseline"><p dir="ltr" style="line-height: 1.38 ; margin-top: 0pt ; margin-bottom: 0pt"><span style="font-size: 11pt ; background-color: transparent ; vertical-align: baseline">at this stage assume that the communication channel is a perfect link (no failures and messages lost)</span></p></li></ul></span></div></div></div></foreignObject><text x="2" y="89" fill="#000000" font-family="Helvetica" font-size="12px">---------------------------------  Replicated Log 1 ----------------------------------...</text></switch></g><rect x="430" y="425" width="50" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 445px; margin-left: 431px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">M</div></div></div></foreignObject><text x="455" y="449" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">M</text></switch></g><rect x="580" y="480" width="50" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 500px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">S2</div></div></div></foreignObject><text x="605" y="504" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">S2</text></switch></g><rect x="580" y="370" width="50" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 390px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">S1</div></div></div></foreignObject><text x="605" y="394" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">S1</text></switch></g><rect x="70" y="595" width="230" height="90" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 228px; height: 1px; padding-top: 640px; margin-left: 72px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><br />M receives an object:<br />POST  /master/add-message<br />clientMsg   = {  data: {},  // any object<br />   options: {}   // will need for log 2, log 3<br />  }</div></div></div></foreignObject><text x="72" y="644" fill="#000000" font-family="Helvetica" font-size="12px">M receives an object:...</text></switch></g><rect x="220" y="355" width="160" height="165" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 438px; margin-left: 222px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span>config: {<br />MaxPubAcksInFlight = 1<br /></span><span></span><span style="font-family: &quot;consolas&quot; , &quot;inconsolata&quot; , &quot;courier&quot; , monospace ; font-size: 14px ; font-weight: 700 ; background-color: rgb(246 , 248 , 250)">store </span>="memory"<br />secondaries: [<br />  {  url: '127.0.0.1:6001'  },<br />  {  url: '127.0.0.1:6002'  }<br /> }<br />}</div></div></div></foreignObject><text x="222" y="441" fill="#000000" font-family="Helvetica" font-size="12px">config: {...</text></switch></g><rect x="660" y="320" width="210" height="105" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 208px; height: 1px; padding-top: 373px; margin-left: 662px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">config:{<br />   delayMin = 1000,<br />   delayMax = 3000,<br />   <span style="font-family: &quot;consolas&quot; , &quot;inconsolata&quot; , &quot;courier&quot; , monospace ; font-size: 14px ; font-weight: 700 ; background-color: rgb(246 , 248 , 250)">store </span>="memory"<br />   master = {  url: '127.0.0.1:6000'  },<br />}</div></div></div></foreignObject><text x="662" y="376" fill="#000000" font-family="Helvetica" font-size="12px">config:{...</text></switch></g><rect x="135" y="955" width="270" height="110" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 268px; height: 1px; padding-top: 1010px; margin-left: 137px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><br />   await promiseAll( sendToS1 (rLogMsg )<br />    to sendToSn).<br />   <br />  response = {}  // success Response<br />   res( response )        <br />) </div></div></div></foreignObject><text x="137" y="1014" fill="#000000" font-family="Helvetica" font-size="12px">await promiseAll( sendToS1 (rLogMsg )...</text></switch></g><rect x="610" y="920" width="230" height="90" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 228px; height: 1px; padding-top: 965px; margin-left: 612px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><br />S receives an object:<br />POST  /secondary/add-message<br />rLogMsg</div></div></div></foreignObject><text x="612" y="969" fill="#000000" font-family="Helvetica" font-size="12px">S receives an object:...</text></switch></g><rect x="140" y="740" width="260" height="50" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 258px; height: 1px; padding-top: 765px; margin-left: 142px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">rLogMsg = getNewRLogMsg( clientMsg  )<br />messages.add( rLogMsg )</div></div></div></foreignObject><text x="142" y="769" fill="#000000" font-family="Helvetica" font-size="12px">rLogMsg = getNewRLogMsg( clientMsg  )...</text></switch></g><rect x="220" y="800" width="260" height="120" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 258px; height: 1px; padding-top: 860px; margin-left: 222px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">getNewRLogMsg( clientMsg  ) {<br />    n = storage.size()<br />    ts = now()<br />    r = {<br />          inc_id: n,<br />          ts<br />     }<br />}</div></div></div></foreignObject><text x="222" y="864" fill="#333333" font-family="Helvetica" font-size="12px">getNewRLogMsg( clientMsg  ) {...</text></switch></g><rect x="100" y="180" width="340" height="100" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 338px; height: 1px; padding-top: 230px; margin-left: 102px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span><b>Publisher rate limiting</b></span><span> -  </span><span>MaxPubAcksInFlight</span><span>  limits the number of unacknowledged messages that a publisher may have in-flight at any given time. When this maximum is reached, further async publish calls will block until the number of unacknowledged messages falls below the specified limit.</span></div></div></div></foreignObject><text x="102" y="234" fill="#333333" font-family="Helvetica" font-size="12px">Publisher rate limiting -  MaxPubAcksInFlight  limits th...</text></switch></g><rect x="650" y="1035" width="230" height="85" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 228px; height: 1px; padding-top: 1078px; margin-left: 652px;"><div style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">messages.add( rLogMsg )<br />response = {}  // success Response<br />   res( response )</div></div></div></foreignObject><text x="652" y="1081" fill="#000000" font-family="Helvetica" font-size="12px">messages.add( rLogMsg )...</text></switch></g><path d="M 430 435 L 380 437.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 630 380 L 660 372.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 667.5 920 L 617.5 520" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="2 6" pointer-events="stroke"/><path d="M 254.43 595 L 455 465" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="2 6" pointer-events="stroke"/><path d="M 405 982.5 L 603.75 943.72" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 608.9 942.71 L 602.7 947.49 L 603.75 943.72 L 601.36 940.62 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 650 1098.75 L 411.18 1039.04" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 406.08 1037.77 L 413.72 1036.07 L 411.18 1039.04 L 412.03 1042.86 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 185 685 L 202.82 734.02" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 204.62 738.95 L 198.94 733.57 L 202.82 734.02 L 205.52 731.17 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 205 790 L 202.6 948.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 202.52 953.88 L 199.12 946.83 L 202.6 948.63 L 206.12 946.94 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>